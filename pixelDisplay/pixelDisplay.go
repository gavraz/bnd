package pixelDisplay

import (
	"fmt"

	"github.com/faiface/pixel"
	"github.com/faiface/pixel/pixelgl"
	"github.com/faiface/pixel/text"
	"golang.org/x/image/colornames"
	"golang.org/x/image/font/basicfont"
)

type choicer interface {
	CurrentChoice() int
	Choices() []string
}

type Handler struct {
}

func New() Handler {
	return Handler{}
}

func (d Handler) DrawMenu(c choicer, win *pixelgl.Window) {
	win.Clear(colornames.Skyblue)

	basicAtlas := text.NewAtlas(basicfont.Face7x13, text.ASCII)
	basicTxt := text.New(pixel.V(100, 500), basicAtlas)

	current := c.CurrentChoice()
	for i, item := range c.Choices() {
		if i == current {
			basicTxt.Color = colornames.Red
		} else {
			basicTxt.Color = colornames.White
		}
		fmt.Fprintln(basicTxt, item)
		basicTxt.Draw(win, pixel.IM.Scaled(basicTxt.Orig, 4))
	}
}
